{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4" style="max-width: 720px;">
  <h1 class="mb-3">Mechanics — симуляция</h1>
  <p class="text-muted">Введите параметры и запустите расчёт. Загрузка (load) — от 0.0 до 1.0.</p>

  <form method="post" class="card p-3 shadow-sm">
    {% csrf_token %}

    <div class="mb-3">
      <label for="id_rpm" class="form-label">Обороты (rpm)</label>
      <input type="number" step="1" min="1" class="form-control {% if errors.rpm %}is-invalid{% endif %}"
             id="id_rpm" name="rpm" value="{{ form.rpm|default_if_none:'' }}" placeholder="Напр., 1200">
      {% if errors.rpm %}
        <div class="invalid-feedback">{{ errors.rpm }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="id_load" class="form-label">Загрузка (0.0 — 1.0)</label>
      <input type="number" step="0.01" min="0" max="1" class="form-control {% if errors.load %}is-invalid{% endif %}"
             id="id_load" name="load" value="{{ form.load|default_if_none:'' }}" placeholder="Напр., 0.7">
      {% if errors.load %}
        <div class="invalid-feedback">{{ errors.load }}</div>
      {% endif %}
    </div>

    <button type="submit" class="btn btn-primary">Запустить расчёт</button>
  </form>

  {% if result %}
  <div class="card mt-4 shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Результат моделирования</h5>
      <table class="table table-sm mb-0 w-auto">
        <tbody>
          <tr><th scope="row">rpm</th><td>{{ result.rpm }}</td></tr>
          <tr><th scope="row">load</th><td>{{ result.load }}</td></tr>
          <tr><th scope="row">torque</th><td>{{ result.torque }}</td></tr>
          <tr><th scope="row">power</th><td>{{ result.power }}</td></tr>
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
